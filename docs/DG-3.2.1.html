<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="keywords" content="JTSDK, JT-ware, wsjtx, jtdx, js8call, build wsjtx, compile wsjtx, Qt, Windows, software, development">
	<title>Hamlib SDK v3.2.1 User Guide</title>
	<link rel="stylesheet" href="style-new.css">
	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
	<script src="script.js"></script>
</head>

<body>
	
	<h1>JTSDK64 Applications and Tools</h1>
    
	<hr>
	<h2>JTSDK 3.2.1 Deployment Guide</h2>
	<hr>

	
	<h3>Preparation: Deploy a Virtualisation Environment</h3>

	<ul>
	<p>It is recommended to deploy the JTSDK into a fresh Windows Virtual Machine. For those 
	unfamiliar with &quot;Virtual Machines&quot; and &quot;Virtualisation Technologies&quot; you shoud refer to  <a href="https://www.redhat.com/en/topics/virtualization/what-is-virtualization">https://www.redhat.com/en/topics/virtualization/what-is-virtualization</a> .</p>
	<p><strong> Note:</strong> Almost EVERY CPU that Runs Windows x64 these days has virtualisation support.</p>
	<p>If you have concerns please refer to <a href="https://www.technorms.com/8208/check-if-processor-supports-virtualization">https://www.technorms.com/8208/check-if-processor-supports-virtualization</a> . </p>
	<p>There are lots of virtualisation environments available. Click on the links below to 
	obtain details on how to deploy these systems:</p>
	<ul>
	<li><a href="https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v">Hyper-V</a></li>
	<li><a href="https://kb.vmware.com/s/article/2057907">VMWare Workstation</a> </li>
	<li><a href="https://kb.vmware.com/s/article/2053973">VMware Player</a></li>
	<li><a href="https://www.virtualbox.org/wiki/Downloads">Virtual Box</a></li>
	</ul>
	<p>Trial Virtual Machine images for Windows 10 (with Microsoft&#39;s Compiler Suite) can 
	be downloaded from <a href="https://developer.microsoft.com/en-us/windows/downloads/virtual-machines/">https://developer.microsoft.com/en-us/windows/downloads/virtual-machines</a>.</p>
	<p>These Virtual machines should have a lifetime of at least 30 days.</p>
	</ul>

	<h3>Step 1: Deploy the JTSDK64-Base-3.2.1.exe Installer and any &quot;Tools&quot; packages if they exist</h3>

	<ul>
	<p><strong> Note that these instructions assumes a fresh Windows 10 Virtual Machine is used </strong></p>
	<ul>
		<li>Download and deploy the installer (i.e. <a href="https://sourceforge.net/projects/hamlib-sdk/files/Windows/JTSDK-3.2-Stream/JTSDK64-Base-3.2.1.exe">JTSDK-Base-3.2.1</a>) inside a FRESH VM.</li>	
		<li>Deploy any &quot;Tools&quot; Packages if they exist ( i.e. <a href="https://sourceforge.net/projects/hamlib-sdk/files/Windows/JTSDK-3.2-Stream/JTSDK64-Tools-3.2.1.0.exe">JTSDK64-Tools-3.2.1.0</a> ) to your Base Deployment.</li>
	</ul>
	<p>It is recommended to use all the default settings and file locations provided by the installer.</p>
	</ul>

	<h3>Step 2: Launch the Installation Environment</h3>
	
	<ul>
	<p>Perform the following steps:</p>
	<ul>
		<li>Launch the <strong>JTSDK64-Setup</strong> environment.</li>
		<li>In this environment type: <strong>postinstall</strong></li>
	</ul>
	<p>The following information will be displayed:</p>
	</ul>
	<div class="reducewidth">
<pre>
------------------------------------------------------
  JTSDK64 Tools Post Install/Redeployment Selections
------------------------------------------------------

 At the prompts indicate which components you want to
 install or redeploy.

 For VC Runtimes, OmniRig, Git, MSYS2 and VS Code use
 --> Y/Yes or N/No

 For the Qt Install Selection:

   D / Y = Default ( minimal set of tools )
   F = Full ( full set of tools )
   N = Skip Installation

 NOTE: VC Runtimes, Git, Qt and MSYS2 are mandatory
 to build JT-software.

 Enter Your Install/Redeployment Selection(s):

(required) VC/C++ Runtimes (Y|N) .:
</pre> </div>
	<ul><ul>
	<li>The VC Runtimes are required. Select &#39;Y&#39;</li>
	</ul></ul>
	<div class="reducewidth">
<pre>
(required) OmniRig (Y|N) ..........:
</pre>
	</div>
	<ul><ul>
	<li>The OmniRig Rig Control tool is required. Select &#39;Y&#39;</li>
	</ul></ul>
	<div class="reducewidth">
<pre>
(required) Git-SCM (Y|N) ..........:
</pre>
	</div>
	<ul><ul>
	<li>The Git-SCM is required. Select &#39;Y&#39;</li>
	</ul></ul>
	<div class="reducewidth">
<pre>
(required) Default Qt (D/Y|F|N) ...:
</pre>
	</div>
	<ul>
	<p>Qt Presents a number of options. &#39;D&#39; or &#39;Y&#39; Selects a scripted &quot;Default&quot; 
	deployment being Qt 5.12.11 as the base. &#39;F&#39; Deploys Qt 5.12.11, 5.15.2 and 6.1.0. Qt is required. </p>
	<ul>
	<li>Select &#39;Y&#39;/&#39;D&#39; or &#39;F&#39; (note:&#39;Y&#39; or &#39;D&#39; is recommended)</li>
	</ul>
	</ul>
	<div class="reducewidth">
<pre>
(required) MSYS2 Setup (Y|N) ......:
</pre>
	</div>
	<ul><ul>
	<li>You are required to set up the MSYS2 environment. Select &#39;Y&#39;</li>
	</ul></ul>
	<div class="reducewidth">
<pre>
(optional) VS Code (Y|N) ..........:
</pre> </div>
	<ul>
	<p><a href="https://code.visualstudio.com/">Visual Studio Code</a> is an optional component. VS Code is an excellent editor for working with 
	PowerShell scripts (if you need to customise these yourself). It also has a number of useful code formatter addins.</p>

	<p>Note that deploying VS Code is not mandatory for JTSDK operation.</p>
	<ul>
	<li>Select &#39;Y&#39; or &#39;N&#39;</li>
	</ul>
	<p>You are then presented with the selections you have made:</p>
	
<div class="reducewidth">
<pre>
* Your Installation Selections:

  --&gt; VC Runtimes .: Y
  --&gt; OmniRig .....: Y
  --&gt; Git .........: Y
  --&gt; Qt ..........: Y
  --&gt; MSYS2 .......: Y
  --&gt; VS Code .....: Y
</pre></div>
	<p>During this phase some tools will require some interaction at the keyboard or via the 
	mouse (especially the Qt deployment as one MUST now have their own account and agree 
	to their licensing terms).</p>
	</ul>
	
	<table width="*" align="center" border="1">
		<tr>
			<td class="custd"><p><strong>Follow on-screen prompts carefully.</strong></p></td>
		</tr>
	</table>

	<h4>Step 2a: Prepare the MSYS2 Environment</h4>
	<ul>
	<p>A MSYS2 environment window will open as part of the <strong>postinstall</strong> process. </p>
	</ul>	
<div class="reducewidth">
<pre>
JTSDK64 Tools MSYS2 using QT v

For main menu, type ..: menu
For Help Menu, type ..: jthelp

Copyright (C) 2013-2021, GPLv3, Greg Beam, KI7MT and JTSDK Contributors.
This is free software; There is NO warranty; not even
for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

sdk@radio ~
$
</pre> </div>
	<ul>
	<li>At the $ prompt type: <strong>menu</strong>
	</li>
	</ul>
	<div class="reducewidth">
<pre>
-------------------------------------
JTSKD64 Tools Main Menu
------------------------------------

 1. Set MSYS2 path to find Qt compilers
 2. Update MSYS2
 3. Install Hamlib dependencies
 4. Install msys64 GNU Compilers
 5. Update MSYS2 Keyring
 6. Build Hamlib - Static Libraries
 7. Build Hamlib - Dynamic Package
 8. Clear Hamlib Source
 9. Select HAMLIB Repository
 h. List help commands
 v. List version information

 e. Enter 'e' or 'q' to exit

Enter your selection, then hit &#60;return&#62;:
</pre>
	</div>
	
<h4>Step 2b: Update the  MSYS2 Environment</h4>
	
	<ul>
		<p>Perform the following steps:</p>
		<ul>
			<li>Select <strong>2. Update MSYS2</strong> to update the MSYS2 environment. </li>
		</ul>
		<p>Note that the window may close on completion if there are updates. </p>
		<ul>
		<li>If the MSYS2 Window closes reopen it within the <strong>JTSDK64-Setup</strong> environment by typing <strong>msys2</strong> at the PowerShell environment prompt.</li>
		<li>If the update process requests that you close the open <strong>msys2</strong> terminal then close the window. Re-open the environment by typing <strong>msys2</strong> at the PowerShell environment prompt.</li>
		<li>Repeat Step 2b - if necessary - until there are no more updates available.</li>
	</ul>
	</ul>
	
	<h4>Step 2c: Install Hamlib Dependencies</h4>
	
	<ul>
		<p>Perform the following steps:</p>
		<ul>
			<li>If the MSYS2 Window closes reopen it within the <strong>JTSDK64-Setup</strong> environment with <strong>msys2</strong></li>
			<li>Back at menu, select <strong>3. Install Hamlib Dependencies</strong> to deploy the tools and libraries needed to build Hamlib.</li>
			<li>(Optional) Select <strong> 4. Install msys64 GNU Compilers </strong> so that a msys64 POSIX-compliant build environment can be launched.</li>
		</ul>
        <br/>
		<table width="*" align="center" border="1">
		<tr>
			<td class="custd"><p><strong>The basic deployment is now complete.</strong></p></td>
		</tr>
	    </table>
		
	
		<p>Once complete you should exit the <strong>JTSDK64-Setup</strong> environment.</p> 
	</ul>
	<ul>
		<ul>
		<li>Close the <strong>JTSDK64-Setup</strong> and any MSYS2 terminal shells. </p></li>
		</ul>
	</ul>
	
	<h3>Step 3: Set Up The Main Tools Environment</h3>
	
	<ul>
	<p>Perform the following step:</p>
		<ul>
		<li>Launch the <strong>JTSDK64-Tools</strong> environment from the icon on your desktop.</li>
		</ul>
</ul>
	
	<h4>Step 3a: (Optional) Upgrade your Qt Deployment</h4>
	<ul>
	  <p>A Minimum Qt installation pegs at <a href="https://www.qt.io/download-open-source">Qt</a> at version 5.12.11. If you did not use the &quot;F&quot; Full option for <a href="https://www.qt.io/download-open-source">Qt</a> deployment or you 
	  want to update Qt to the more contemporary 5.15.2 version you should do so now. Note that using Qt 5.15.2 is highly recommended.</p>
	  <p>Perform the following steps:</p>
		<ul>
		  	<li>Navigate to the Qt Deployment directory</li>
			
			<li>Run the <strong>Qt Maintenance Tool</strong> from your Qt deployment directory (i.e. <strong>C:\JTASK64-Tools\tools\Qt</strong>)</li>
		</ul>
	  <p>To add Qt 5.15.2:</p>
		<ul>
			<li>Add Qt 5.15.2 MinGW.</li>
			
			<li>Add Developer and Designer Tools / MinGW 8.1.0 64-bit</li>
			
			<li>(Optional) Add the OpenSSL 1.1.1x toolkit (it helps with a WSJTX download).</li>
		</ul>
	  <p>On Completion:</p>
		<ul>
			<li>Adjust the maker file in <strong>C:\JTSDK64-Tools\config</strong> marker file to match the Qt version that you want to use </li>
			
			<ul>
			<li>i.e. rename <strong>qt5.12.11</strong> to <strong>qt5.15.2</strong></li>
			</ul>
		</ul>
	</ul>
	
	<table width="*" align="center" border="1">
		<tr>
			<td class="custd"><p align="center">There must only be ONE marker file indicating the Qt version selected in <strong>C:\JTSDK64-Tools\config</strong></p>
				
			<p align="center">If the system abends with a warning check the <strong>C:\JTSDK64-Tools\config</strong> directory and remove the unwanted item with the prefix <strong>&#39;qt&#39;</strong></p>
			</td>
		</tr>
	</table>
	
	<h4>Step 3b: Deploy Hamlib for our selected Qt Version.</h4>
	
	<ul>
		<p>In <strong>JTSDK64-Tools</strong>:</p>
		<ul>
			<li>Launch the MSYS2 environment with: <strong>msys2</strong></li>
			
			<li>Type: <strong>menu</strong></li>
			
			<li>Select <strong>5. Build Hamlib - Static Libraries</strong></li>
		</ul>

		<p><strong>Note:</strong> If you have difficulties packaging <a href="https://hamlib.github.io/">Hamlib</a> with <a href="https://jtdx.tech/en/">JTDX</a> and/or <a href="http://js8call.com/">JS8CALL</a> you may need to use the The <strong>build-hamlib.sh</strong> script from the MSYS2 terminal as follows:</p>
		<ul>
			<li><strong>build-hamlib.sh -nlibusb</strong></li>
		</ul>
		<p>This will take time as it pulls from the master repository for Hamlib. </p>

		<p>Source distribution repositories can be changed by changing the marker file in <strong>C:\JTSDK64-Tools\config</strong> </p>
		<ul>
			<li>Valid options are: <strong>hlmaster</strong> (default and recommended), <strong>hlw4mdb</strong>, <strong>hlg4wjs</strong> or <strong>hlnone</strong> for no default pull and update.</li>
		</ul>
	</ul>
	
<h4>Step 3c: Deploy Boost for our selected Qt/MinGW Version.</h4>

<table width="*" align="center" border="1">
	<tr>
		<td class="custd"><p><strong><em>&nbsp;** THIS IS SLOW **</em></strong>. Despite &quot;dropins&quot; being available on the Sourceforge and Github the best procedure is to build your own.</p></td>
	</tr>
</table>
	<ul>
		
		<p>In JTSDK64-Tools:</p>
		<ul>
		<li>Type: <strong>Deploy-Boost</strong></li>
		</ul>
	
		<p>Around 90 minutes later you should now have a deployment of Boost based at the recommended v1.74.0 (configurable in <strong>C:\JTSDK64-Tools\config\Versions.ini</strong>) that is suitable to build JT-software under your selected Qt version on your machine.</p>
	
	<p>Pre-compiled drop-in Packages for <a href="https://sourceforge.net/projects/hamlib-sdk/files/Windows/JTSDK-3.2-Stream/Boost-1.74.0-MinGW-v7.3-v8.1.7z">Boost-1.74.0</a> and <a href="https://sourceforge.net/projects/hamlib-sdk/files/Windows/JTSDK-3.2-Stream/Boost-1.77.0-MinGW-v7.3-v8.1.7z">Boost-1.77.0</a> are available at the time of writing. Each “drop-in” package has folders i.e. 1.74.0-7.3 for <a href="http://www.mingw.org/">MinGW</a> 7.3 (pre-Qt 5.15) and 1.74.0-8.1 (for post-Qt 5.15 including the 6.x.x streams). </p>
	<ul>
	<li>Extract the folder for the Boost version-package that you want to use into <strong>C:\JTSDK64-Tools\tools\boost</strong> (create the directory if it does not exist) and then remove the -7.3 or -8.1 suffix ! </li>
	</ul>
		<p>A Windows symbolic link will also work with a drop-in package:</p> 
		<ul>
		
		<li>Assume that both the 1.74.0-7.3 and 1.74.0-8.1 distributions have been unpacked from <strong>Boost-1.74.0-MinGW-v7.3-v8.1.7z</strong> to <strong>C:\JTSDK64-Tools\tools\boost</strong> .</li> 
		
			<li>The <strong>Command Shell</strong> or <strong>PowerShell</strong> terminals must be positioned at <strong>C:\JTSDK64-Tools\tools\boost</strong></li>
			
			<ul>
				<li><strong>cd C:\JTSDK64-Tools\tools\boost</strong></li>
				
			</ul>
			<li>Execute the command that is most appropriate for your terminal environment:</li>
			
			<ul>
				<li>Command Shell (CMD):<strong> mklink /D 1.74.0 1.74.0-8.1 </strong></li>
				
				<li>PowerShell:<strong> New-Item -ItemType SymbolicLink -Path C:\JTSDK64-Tools\tools\boost\boost-1.74.0 -Value C:\JTSDK64-Tools\tools\boost\boost-1.74.0-8.1 </strong></li>
			</ul>
		</ul>
		<p><strong>Note:</strong> The preference is to build your own Boost package and NOT use these "dropins".</p>
	</ul>

	<table width="*" align="center" border="1">
		<tr>
			<td class="custd">A commandlet&nbsp; <strong>Reset-Boost.ps1</strong> is available to reset Boost builds.</td>
		</tr>
	</table>
    <br/>
    	<table width="*" align="center" border="1">
		<tr>
			<td class="custd"><strong>&nbsp;&nbsp; Environments should now be complete for building JT-ware&nbsp;&nbsp;</strong></td>
		</tr>
	</table>

<h3>Step 4: Build your JT- Software</h3>

	<ul>
	<p>Notes can be found in the <a href="DG-Build-JT-ware">Build JT-ware Guide</a>.</p>

	</ul>
	<hr/>
<h2>Upgrades and Updates</h2>
<hr/>
	<h3>Upgrades</h3>
	<ul>
	<p>The <a href="https://sourceforge.net/projects/hamlib-sdk/files/Windows/JTSDK-3.2-Stream/JTSDK64-Base-3.2.1.exe">JTSDK64-Base-3.2.1</a> should only be installed over the top of previous kits <strong>at your own risk </strong>. It is 
	highly recommended that one start from scratch and copy customised elements back from  JTSDK backups (see later in this section) once the kit is fully deployed..	</p>
	<p>Note that the MSYS2 packaged may not update after a <strong>pacman -Syuu</strong> is performed on the new deployment if the JTSDK is deployed over the top of updated MSYS2 versions.</p>
	<p>Follow the steps below:</p>
		<ul>
		<li>You should backup old deployment(s) by closing all open environment windows and renaming the deployment folder (i.e. <strong>C:\JTSDK64-Tools</strong> to <strong>C:\JTSDK64-Tools-Old</strong>). If you need to revert back to your old deployment then all you need do is rename that folder back to its original filename (i.e. <strong>C:\JTSDK64-Tools-Old</strong> back to <strong>C:\JTSDK64-Tools</strong>) </li>
	<li><strong>YOU MUST BACK UP YOUR X:\JTSDK64-Tools\tools\msys64\home\&lt;userprofile&gt; DIRECTORY</strong></li>
	<li>Deploy your JTSDK 3.2.1 over the top of an existing deployment using the new deployment procedures.</li>
	<li>Delete the <strong>/bin</strong> directory from your backed up <strong>&lt;userprofile&gt;</strong> </li>
	<li>Copy your backed-up <strong>&lt;userprofile&gt;</strong> to <strong>X:\JTSDK64-Tools\tools\msys64\home\</strong> over the top of the newly created profile - restoring your builds and customisations after the upgrade.</li>
		</ul>
	</ul>
	
<h3>Maintenance Updates: &quot;Tools&quot; Packages</h3>
	
	<ul>
	<p>Maintenance updates will be applied in the form of &quot;Tools&quot; packages. These packages 
	are designed to be deployed to existing &quot;Base&quot; packages.</p>
	</ul>
	
<h4>Application of Maintenance &quot;Tools&quot; packages</h4>

	<ul>
		<p><strong></strong>&quot;Tools&quot;</strong> packages are updates to the <strong></strong>&quot;Base&quot;</strong> environments.</p>
	<p><em>These steps assume that you have a deployed base environment</em></p>
	<ul>
	<li>Download any &quot;Tools&quot; packages from <a href="https://sourceforge.net/projects/hamlib-sdk/files/Windows/JTSDK-3.2-Stream/">https://sourceforge.net/projects/hamlib-sdk/files/Windows/JTSDK-3.2-Stream/</a> </li>
	</ul>
	<p><strong>Note:</strong> There is no current &quot;Tools&quot; package. The first anticipated version would be <a href="https://sourceforge.net/projects/hamlib-sdk/files/Windows/JTSDK-3.2-Stream/JTSDK64-Tools-3.2.1.0.exe">JTSDK64-Tools-3.2.1.0</a>.exe.</p>
	<ul>
	<li>Deploy the tools package to your JTSDK install directory.</li>
	</ul>
	<p>Updates may apply to the MSYS2 environment. Therefore the &quot;profile&quot; directory for 
	MSYS2 should be deleted and re-created.</p>
	<ul>
		<li>(Optional) Copy any folders stored under <strong>C:\JTSDK64-Tools\tools\msys64\home</strong> to a backup location. This should enable you to access previous work.</li>
		
		<li>Close any open MSYS2 environment terminal(s).</li>
		
		<li>Perform the system upgrade.</li>
		
		<li>Delete folders that exist under <strong>C:\JTSDK64-Tools\tools\msys64\home</strong>.</li>
	  
		<ul>
			<li>i.e: PowerShell: <strong> Remove-Item &quot;C:\JTSDK64-Tools\tools\msys64\home*&quot; -Recurse -Force </strong></li>
		</ul>
		
		<li>Re-open MSYS2 with the <strong>msys2</strong> command inside the PowerShell terminal</li>
	</ul>
	<p><strong>Note:</strong> The <strong>src</strong> directory in your backup should contain your previous work. It 
	is safe to copy this enture foler across to your new MSYS2 Profile.</p>
	<p>You will need to pull down your Hamlib repository again and/or restore any custom work 
	to folders created within the MSYS2 environment. See Step 3b below.</p>
	</ul>
	
<hr>
	<h2>Conclusion and Further References</h2>
	<hr>
	<ul>
	<p>The aim of <strong>JTSDK64-Tools</strong> is to use an Agile delivery approach to create a
	high-quality, yet flexible build system. </p>
	<p>Base ref: <a href="https://sourceforge.net/projects/jtsdk/files/win64/3.1.0/README.md">https://sourceforge.net/projects/jtsdk/files/win64/3.1.0/README.md</a></p>
	</ul>
<hr>
	<table width="100%" border="0">
	  <tbody>
		<tr>
		  <td>Author: Steve VK3VM/VK3SIR</td>
		  <td align="right"><a href="hamlibdk [at] outlook.com"
			rel="nofollow"
			onclick="this.href='mailto:' + 'hamlibdk' + '@' + 'outlook.com'">Contact</a></td>
		</tr>
	  </tbody>
	</table>	
</body>
</html>